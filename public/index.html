<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width initial-scale=1"
  />

  <title>Study Spot Reviews</title>

  <link
    rel="preconnect"
    href="https://fonts.googleapis.com"
  >
  <link
    rel="preconnect"
    href="https://fonts.gstatic.com"
    crossorigin
  >
  <link
    href="https://fonts.googleapis.com/css2?family=Jost:wght@100..900&display=swap"
    rel="stylesheet"
  >
  <link
    rel="stylesheet"
    href="style.css"
  />

  <!--  DOMPurify cleans up HTML to prevent XSS attacks
  https://www.jsdelivr.com/package/npm/dompurify  -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.3.0/dist/purify.min.js"></script>

</head>

<body>
  <header>
    <h1>üìö Study Spot Reviews</h1>
    <h4>Find and review the best places to study</h4>
  </header>
  <section id="status">
    <p id="readyStatus">‚úÖ MongoDB is Ready</p>
    <p id="notReadyStatus">‚ùå MongoDB is not connected. Please check your connection string in <code>.env</code> file.
    </p>
  </section>
  <button id="createButton">Add New Study Spot</button>

  <dialog id="formDialog">
    <div class="modal-container">
      <div class="modal-header">
        <h2>ÔøΩ Add Study Spot</h2>
        <p>Share a great place to study</p>
      </div>

      <div class="modal-body">
        <form
          id="myForm"
          method="dialog"
        >
          <!-- Hidden field to store ID for updates -->
          <input
            type="hidden"
            name="id"
            id="id"
          />

          <!-- Hidden field to store image data -->
          <input
            type="hidden"
            name="imageUrl"
            id="imageUrl"
          />

          <!-- Hidden field for links array -->
          <input
            type="hidden"
            name="links"
            id="linksField"
            value="[]"
          />

          <!-- Image upload section -->
          <fieldset class="upload-fieldset">
            <legend>Study Spot Photo</legend>
            <div id="uploadArea">
              <img
                id="imagePreview"
                src="assets/photo.svg"
                alt="Image preview"
              />
              <div class="upload-controls">
                <input
                  type="file"
                  id="fileInput"
                  accept="image/*"
                  style="display:none"
                />
                <button
                  type="button"
                  id="browseButton"
                >Browse</button>
                <button
                  type="button"
                  id="removeImageButton"
                  style="display:none;"
                >Remove</button>
                <p id="uploadInstructions">or drag and drop an image here</p>
              </div>
            </div>
            <div
              id="noticeArea"
              style="display:none"
            ></div>
          </fieldset>

          <!-- BASIC INFO -->
          <fieldset>
            <legend>Basic Info</legend>
            
            <label for="name">Name of Place</label>
            <input
              required
              type="text"
              name="name"
              id="name"
              placeholder="e.g. The Daily Brew"
              autocomplete="off"
            />
            <small class="validation">Name is required</small>
          </fieldset>

            <label for="address">Address</label>
            <input
              required
              type="text"
              name="address"
              id="address"
              placeholder="Street, City, Province, Postal Code"
              autocomplete="off"
            />
            <small>Country: Canada</small>

            <label for="spotType">Type of Spot</label>
            <select
              required
              name="spotType"
              id="spotType"
            >
              <option value="" disabled selected>Select a Type</option>
              <option value="Cafe">Cafe</option>
              <option value="Library">Library</option>
              <option value="Park">Park</option>
              <option value="Co-working space">Co-working space</option>
              <option value="Other">Other</option>
            </select>
          </fieldset>

          <!-- CONTACT -->
          <fieldset>
            <legend>Contact</legend>
            
            <label for="hours">Hours</label>
            <input
              type="text"
              name="hours"
              id="hours"
              placeholder="e.g. Mon-Fri: 7AM-6PM, Sat: 8AM-5PM"
              autocomplete="off"
            />

            <label for="phoneNumber">Phone Number</label>
            <input
              type="tel"
              name="phoneNumber"
              id="phoneNumber"
              placeholder="e.g. (555) 123-4567"
              autocomplete="off"
            />

            <label for="linksInput">Add Links</label>
            <small>Website, social media, etc.</small>
            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
              <input
                type="url"
                id="linksInput"
                placeholder="e.g. https://example.com"
                style="flex: 1;"
              />
              <button type="button" id="addLinkButton">Add Link</button>
            </div>
            <div id="linksContainer"></div>
          </fieldset>

          <!-- FEATURES -->
          <fieldset>
            <legend>Features</legend>
            
            <label for="hasWifi">
              <input
                type="checkbox"
                name="hasWifi"
                id="hasWifi"
              />
              <span>WiFi</span>
            </label>

            <label for="hasOutlets">
              <input
                type="checkbox"
                name="hasOutlets"
                id="hasOutlets"
              />
              <span>Outlets / Charging</span>
            </label>

            <label for="hasIndoorSeating">
              <input
                type="checkbox"
                name="hasIndoorSeating"
                id="hasIndoorSeating"
              />
              <span>Indoor Seating</span>
            </label>

            <label for="hasOutdoorSeating">
              <input
                type="checkbox"
                name="hasOutdoorSeating"
                id="hasOutdoorSeating"
              />
              <span>Outdoor Seating</span>
            </label>

            <label for="hasRestroom">
              <input
                type="checkbox"
                name="hasRestroom"
                id="hasRestroom"
              />
              <span>Restroom</span>
            </label>

            <label for="acceptsCreditCard">
              <input
                type="checkbox"
                name="acceptsCreditCard"
                id="acceptsCreditCard"
              />
              <span>Accepts Credit Card</span>
            </label>

            <label>Parking</label>
            <label for="freeParking">
              <input
                type="radio"
                id="freeParking"
                name="parkingType"
                value="free"
              />
              <span>Free Parking</span>
            </label>
            <label for="paidParking">
              <input
                type="radio"
                id="paidParking"
                name="parkingType"
                value="paid"
              />
              <span>Paid Parking</span>
            </label>
            <label for="noParking">
              <input
                type="radio"
                id="noParking"
                name="parkingType"
                value="none"
              />
              <span>No Parking</span>
            </label>
          </fieldset>
        </form>
      </div>

      <div class="modal-footer">
        <button
          type="button"
          class="save"
          id="saveButton"
        >Save</button>
        <button
          type="button"
          class="cancel"
          id="cancelButton"
        >Cancel</button>
      </div>
    </div>
  </dialog>

  <main>
    <h2>ÔøΩ Study Spots</h2>
    <section id="contentArea"></section>
  </main>

  <section id="intro">
    <h3>About Study Spot Reviews</h3>
    <p>Welcome to Study Spot Reviews! This platform helps students and professionals find the best places to study in their area. Share reviews, ratings, and photos of your favorite study locations to help others discover great spots.</p>
    <p>Features:</p>
    <ul>
      <li>Create and manage study spot listings</li>
      <li>Leave detailed reviews with ratings and photos</li>
      <li>Filter by spot type, amenities, and more</li>
      <li>Find the perfect place to study</li>
    </ul>
  </section>

  <footer>
    Created by <a href="https://nsitu.ca">Harold Sikkema</a> in the context of
    Systems Design in the Interaction Design program at Sheridan College.
  </footer>

  <script
    src="script.js"
    type="module"
  ></script>

  <script src="upload.js"></script>

</body>

</html>